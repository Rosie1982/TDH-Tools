<!-- mapserver template -->
[leg_header_html]
<style>
    /*
       this relies on the terrible, terrible arrangement where MapServer's
       pixel class names are bodgied to include a couple of carefully made
       html spans (e.g. the class that represents 10-22 is labelled with:
       "<span class='start'>10</span><span class='end'>22</span>"), which
       is terrible but is the only way to get pixel class range info into
       the legend template.

       Here, css hides all of the legend labels, then carefully re-displays
       just a few to nicely label the legend.
    */
    .legend {
        padding: 1em 0 0 1em;
        list-style: none;
        white-space: nowrap;
    }

    .legend li {
        display: inline-block;
        width: 1em;
        height: 1em;
    }

    li.legendlabel {
        color: #fff;
        opacity: 0.8;
        margin-right: -1em;
        position: relative;
        bottom: 1.25em;
    }

    li.legendlabel, li.legendlabel span {
        display: none;
    }

    li.legendlabel span {
        font-size: 80%;
    }

    li.legendlabel0,
    li.legendlabel9,
    li.legendlabel19
    {
        display: inline-block;
    }

    li.legendlabel0 .start,
    li.legendlabel9 .end,
    li.legendlabel19 .end
    {
        display: inline;
    }

    .legend li img {
        width: 100%;
        height: 100%;
    }
</style>
<ol class="legend">
[/leg_header_html]

[leg_class_html]<li class="legendlabel legendlabel[leg_class_index]">
    [leg_class_name]
</li><li class="legendelement legendelement[leg_class_index]">
    <img alt="" src="[leg_icon width=100 height=100]">
</li>[/leg_class_html]

[leg_footer_html]</ol>[/leg_footer_html]
