<!DOCTYPE html><html xmlns:date="http://exslt.org/dates-and-times" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
<meta charset="utf-8">
<title>phpDocumentor » \CommandProcessor</title>
<meta name="author" content="Mike van Riel">
<meta name="description" content="">
<link href="../css/template.css" rel="stylesheet" media="all">
<script src="../js/jquery-1.7.1.min.js" type="text/javascript"></script><script src="../js/jquery-ui-1.8.2.custom.min.js" type="text/javascript"></script><script src="../js/jquery.mousewheel.min.js" type="text/javascript"></script><script src="../js/bootstrap.js" type="text/javascript"></script><script src="../js/template.js" type="text/javascript"></script><script src="../js/prettify/prettify.min.js" type="text/javascript"></script><link rel="shortcut icon" href="../img/favicon.ico">
<link rel="apple-touch-icon" href="../img/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="72x72" href="../img/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="114x114" href="../img/apple-touch-icon-114x114.png">
</head>
<body>
<div class="navbar navbar-fixed-top">
<div class="navbar-inner"><div class="container">
<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></a><a class="brand" href="../index.html">phpDocumentor</a><div class="nav-collapse"><ul class="nav">
<li class="dropdown">
<a href="#api" class="dropdown-toggle" data-toggle="dropdown">
                                    API Documentation <b class="caret"></b></a><ul class="dropdown-menu">
<li><a>Packages</a></li>
<li><a href="../packages/CommandAction.html"><i class="icon-folder-open"></i> CommandAction</a></li>
<li><a href="../packages/Default.html"><i class="icon-folder-open"></i> Default</a></li>
<li><a href="../packages/Search.html"><i class="icon-folder-open"></i> Search</a></li>
</ul>
</li>
<li class="dropdown" id="charts-menu">
<a href="#charts" class="dropdown-toggle" data-toggle="dropdown">
                                    Charts <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="../graph_class.html"><i class="icon-list-alt"></i> Class hierarchy diagram</a></li></ul>
</li>
<li class="dropdown" id="reports-menu">
<a href="#reports" class="dropdown-toggle" data-toggle="dropdown">
                                    Reports <b class="caret"></b></a><ul class="dropdown-menu">
<li><a href="../errors.html"><i class="icon-remove-sign"></i> Errors 
                <span class="label label-info">982</span></a></li>
<li><a href="../markers.html"><i class="icon-map-marker"></i> Markers 
                <ul><li>todo 
                <span class="label label-info">17</span>
</li></ul></a></li>
<li><a href="../deprecated.html"><i class="icon-stop"></i> Deprecated elements 
                <span class="label label-info">0</span></a></li>
</ul>
</li>
</ul></div>
</div></div>
<div class="go_to_top"><a href="#___" style="color: inherit">Back to top  <i class="icon-upload icon-white"></i></a></div>
</div>
<div id="___" class="container">
<noscript><div class="alert alert-warning">
                            Javascript is disabled; several features are only available
                            if Javascript is enabled.
                        </div></noscript>
<div class="row">
<div class="span4">
<span class="btn-group visibility" data-toggle="buttons-checkbox"><button class="btn public active" title="Show public elements">Public</button><button class="btn protected" title="Show protected elements">Protected</button><button class="btn private" title="Show private elements">Private</button><button class="btn inherited active" title="Show inherited elements">Inherited</button></span><div class="btn-group view pull-right" data-toggle="buttons-radio">
<button class="btn details" title="Show descriptions and method names"><i class="icon-list"></i></button><button class="btn simple" title="Show only method names"><i class="icon-align-justify"></i></button>
</div>
<ul class="side-nav nav nav-list">
<li class="nav-header">
<i class="icon-custom icon-method"></i> Methods</li>
<li class="method public "><a href="#ProcessQueue" title="ProcessQueue :: - Read queue folder  configuration::CommandQueueFolder()
- look for Commands to process  (Commands are PHPO serialized CommandAction objects)"><span class="description">- Read queue folder  configuration::CommandQueueFolder()
- look for Commands to process  (Commands are PHPO serialized CommandAction objects)</span><pre>ProcessQueue()</pre></a></li>
<li class="nav-header private">» Private</li>
<li class="method private "><a href="#Finalise" title="Finalise :: Command will be in FINALISED state if the the process being set it."><span class="description">Command will be in FINALISED state if the the process being set it.</span><pre>Finalise()</pre></a></li>
<li class="method private "><a href="#Log" title="Log :: For debugging to see progess and state of command as it flows thru"><span class="description">For debugging to see progess and state of command as it flows thru</span><pre>Log()</pre></a></li>
<li class="method private "><a href="#Ready" title="Ready :: Command entes here at READY stage"><span class="description">Command entes here at READY stage</span><pre>Ready()</pre></a></li>
<li class="method private "><a href="#Running" title="Running :: Check on Running job  $cmd-&gt;ExecutionFlag() ==  CommandAction::$EXECUTION_FLAG_RUNNING"><span class="description">Check on Running job  $cmd-&gt;ExecutionFlag() ==  CommandAction::$EXECUTION_FLAG_RUNNING</span><pre>Running()</pre></a></li>
<li class="method private "><a href="#executeScript" title="executeScript :: Execute script
i.e. push script into QSUB queue and return qsub ID"><span class="description">Execute script
i.e. push script into QSUB queue and return qsub ID</span><pre>executeScript()</pre></a></li>
<li class="method private "><a href="#generateScript" title="generateScript :: Create TCSH script that will be written to the filesystem to be sent to the GRID"><span class="description">Create TCSH script that will be written to the filesystem to be sent to the GRID</span><pre>generateScript()</pre></a></li>
<li class="method private "><a href="#processSingleQueueItem" title="processSingleQueueItem :: Read Single command file
- unserailize and action command based on it's &quot;state&quot; ExecutionFlag (ref: CommandAction statics)"><span class="description">Read Single command file
- unserailize and action command based on it's "state" ExecutionFlag (ref: CommandAction statics)</span><pre>processSingleQueueItem()</pre></a></li>
<li class="method private "><a href="#scriptIt" title="scriptIt :: Generate script to be QSUB'ed
QSUB can handle simple command line arguments, but too complex and it overruns the line length"><span class="description">Generate script to be QSUB'ed
QSUB can handle simple command line arguments, but too complex and it overruns the line length</span><pre>scriptIt()</pre></a></li>
<li class="nav-header">
<i class="icon-custom icon-property"></i> Properties</li>
<li class="property public "><a href="#%24QSTAT_COMPLETED" title="$QSTAT_COMPLETED :: "><span class="description">$QSTAT_COMPLETED</span><pre>$QSTAT_COMPLETED</pre></a></li>
<li class="property public "><a href="#%24QSTAT_RUNNING" title="$QSTAT_RUNNING :: "><span class="description">$QSTAT_RUNNING</span><pre>$QSTAT_RUNNING</pre></a></li>
</ul>
</div>
<div class="span8">
<a name="%5CCommandProcessor" id="\CommandProcessor"></a><ul class="breadcrumb">
<li>
<a href="../index.html"><i class="icon-custom icon-class"></i></a><span class="divider">\</span>
</li>
<li><a href="../namespaces/default.html">default</a></li>
<li class="active">
<span class="divider">\</span><a href="../classes/CommandProcessor.html">CommandProcessor</a>
</li>
</ul>
<div href="../classes/CommandProcessor.html" class="element class">
<p class="short_description">Process Commands in Queue and do soemthig with them
Start, Status, Complete</p>
<div class="details">
<p class="long_description">launch a qsub job for this action
a qsub job will write a script file out to be run
and then return back a qsub ID that can be use to track the job
though QSTAT - so maybe we can give the QSTAT  id to COmmand and save it

then with running we can read the STAT line for that ID and

return that into the status update
a complete will be if we see qstat qith a C for Cancelling

or we don't see that job in qstat any more
or COMMAND has been set to Finalised
once the qsub job is finished then we finish our job and save the command

and what of the output of that Action
depeneds on the action to what the output is
will most likley be a file list or a serialized Object that

will give details of where to what file needs to be downloaded.
instatiate Object based on COmmand Action

assign command to action
execute action  - tyhis action will need to up date command ?

or use command to update itself.
so if we chnage status or</p>
<h3>
<i class="icon-custom icon-method"></i> Methods</h3>
<a name="ProcessQueue" id="ProcessQueue"></a><div class="element clickable method public ProcessQueue" data-toggle="collapse" data-target=".ProcessQueue .collapse">
<h2>- Read queue folder  configuration::CommandQueueFolder()
- look for Commands to process  (Commands are PHPO serialized CommandAction objects)</h2>
<pre>ProcessQueue() </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><p class="long_description"></p></div></div>
</div>
<a name="Finalise" id="Finalise"></a><div class="element clickable method private Finalise" data-toggle="collapse" data-target=".Finalise .collapse">
<h2>Command will be in FINALISED state if the the process being set it.</h2>
<pre>Finalise(CommandAction $cmd) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<p class="long_description">Changes ExecutionFlag  to  CommandAction::$EXECUTION_FLAG_COMPLETE</p>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$cmd</h4>
<code><a href="../classes/CommandAction.html">\CommandAction</a></code>
</div>
</div></div>
</div>
<a name="Log" id="Log"></a><div class="element clickable method private Log" data-toggle="collapse" data-target=".Log .collapse">
<h2>For debugging to see progess and state of command as it flows thru</h2>
<pre>Log(CommandAction $command, \type $msg) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<p class="long_description"></p>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$command</h4>
<code><a href="../classes/CommandAction.html">\CommandAction</a></code>
</div>
<div class="subelement argument">
<h4>$msg</h4>
<code>\type</code>
</div>
</div></div>
</div>
<a name="Ready" id="Ready"></a><div class="element clickable method private Ready" data-toggle="collapse" data-target=".Ready .collapse">
<h2>Command entes here at READY stage</h2>
<pre>Ready(CommandAction $cmd) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<p class="long_description"></p>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$cmd</h4>
<code><a href="../classes/CommandAction.html">\CommandAction</a></code><p>Changes ExecutionFlag to CommandAction::$EXECUTION_FLAG_RUNNING</p>
</div>
</div></div>
</div>
<a name="Running" id="Running"></a><div class="element clickable method private Running" data-toggle="collapse" data-target=".Running .collapse">
<h2>Check on Running job  $cmd-&gt;ExecutionFlag() ==  CommandAction::$EXECUTION_FLAG_RUNNING</h2>
<pre>Running(CommandAction $cmd) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<p class="long_description">Using ID check QSTAT to check in the job is still actually running

Changes ExecutionFlag  to  CommandAction::$EXECUTION_FLAG_COMPLETE if Job is not in QSTAT</p>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$cmd</h4>
<code><a href="../classes/CommandAction.html">\CommandAction</a></code>
</div>
</div></div>
</div>
<a name="executeScript" id="executeScript"></a><div class="element clickable method private executeScript" data-toggle="collapse" data-target=".executeScript .collapse">
<h2>Execute script
i.e. push script into QSUB queue and return qsub ID</h2>
<pre>executeScript(string $scriptFilename) : string</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<p class="long_description"></p>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$scriptFilename</h4>
<code>string</code>
</div>
<h3>Returns</h3>
<div class="subelement response">
<code>string</code>Queue ID from QSTAT</div>
</div></div>
</div>
<a name="generateScript" id="generateScript"></a><div class="element clickable method private generateScript" data-toggle="collapse" data-target=".generateScript .collapse">
<h2>Create TCSH script that will be written to the filesystem to be sent to the GRID</h2>
<pre>generateScript(CommandAction $cmd) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<p class="long_description">The actaul command be run is "CommandActionExecute.php  <command id>"</p>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$cmd</h4>
<code>\iCommand</code>
</div>
</div></div>
</div>
<a name="processSingleQueueItem" id="processSingleQueueItem"></a><div class="element clickable method private processSingleQueueItem" data-toggle="collapse" data-target=".processSingleQueueItem .collapse">
<h2>Read Single command file
- unserailize and action command based on it's "state" ExecutionFlag (ref: CommandAction statics)</h2>
<pre>processSingleQueueItem(string $filepath) : null</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<p class="long_description"></p>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$filepath</h4>
<code>string</code>
</div>
<h3>Returns</h3>
<div class="subelement response">
<code>null</code>null</div>
</div></div>
</div>
<a name="scriptIt" id="scriptIt"></a><div class="element clickable method private scriptIt" data-toggle="collapse" data-target=".scriptIt .collapse">
<h2>Generate script to be QSUB'ed
QSUB can handle simple command line arguments, but too complex and it overruns the line length</h2>
<pre>scriptIt(CommandAction $cmd) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<p class="long_description">and send generated script to QSUB</p>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$cmd</h4>
<code><a href="../classes/CommandAction.html">\CommandAction</a></code>
</div>
</div></div>
</div>
<h3>
<i class="icon-custom icon-property"></i> Properties</h3>
<a name="%24QSTAT_COMPLETED" id="$QSTAT_COMPLETED"> </a><div class="element clickable property public $QSTAT_COMPLETED" data-toggle="collapse" data-target=".$QSTAT_COMPLETED .collapse">
<h2>$QSTAT_COMPLETED</h2>
<pre>$QSTAT_COMPLETED </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><p class="long_description"></p></div></div>
</div>
<a name="%24QSTAT_RUNNING" id="$QSTAT_RUNNING"> </a><div class="element clickable property public $QSTAT_RUNNING" data-toggle="collapse" data-target=".$QSTAT_RUNNING .collapse">
<h2>$QSTAT_RUNNING</h2>
<pre>$QSTAT_RUNNING </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><p class="long_description"></p></div></div>
</div>
</div>
</div>
</div>
</div>
<div class="row"><footer class="span12">
            Template is built using <a href="http://twitter.github.com/bootstrap/">Twitter Bootstrap 2</a> and icons provided by <a href="http://glyphicons.com/">Glyphicons</a>.<br>
            Documentation is powered by <a href="http://www.phpdoc.org/">phpDocumentor 2.0.0a3</a> and<br>
            generated on 2012-06-28T11:03:24+10:00.<br></footer></div>
</div>
</body>
</html>
